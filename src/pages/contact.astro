---
import PageLayout from "../layouts/PageLayout.astro";
import { LINKS } from "../config";

// Later: set WEB3FORMS_KEY in Cloudflare Pages env vars.
// WEB3FORMS_KEY=xxxxxxxx
const WEB3FORMS_KEY = import.meta.env.WEB3FORMS_KEY;
---

<PageLayout title="Contact" kicker="Letâ€™s talk">
  <p class="p">
    The fastest way to reach me is email:
    <a href={`mailto:${LINKS.email}`}>{LINKS.email}</a>.
    Or use the form below.
  </p>

  <div class="card" style="padding: 16px; margin-top: 14px;">
    <form method="POST" action="https://api.web3forms.com/submit">
      <input type="hidden" name="access_key" value={WEB3FORMS_KEY} />
      <input type="hidden" name="subject" value="New message from sidhartha.guru" />
      <input type="hidden" name="from_name" value="sidhartha.guru" />

      <label for="name">Name</label>
      <input id="name" name="name" required />

      <label for="email">Email</label>
      <input id="email" name="email" type="email" required />

      <label for="message">Message</label>
      <textarea id="message" name="message" required></textarea>

      <div style="margin-top: 12px; display:flex; gap: 10px; flex-wrap:wrap; align-items:center;">
        <button class="btn btnPrimary" type="submit">Send</button>
        <span class="small">No login required. I typically respond within a couple of days.</span>
      </div>
    </form>
  </div>

  {!WEB3FORMS_KEY && (
    <p class="small" style="margin-top: 12px;">
      Note: set <code>WEB3FORMS_KEY</code> in your hosting environment to enable form submissions.
      Until then, email works.
    </p>
  )}
</PageLayout>